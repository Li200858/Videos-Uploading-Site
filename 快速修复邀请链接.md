# 🚀 快速修复邀请链接（localhost问题）

## 立即解决方案

### 步骤1：获取您的 Render 应用域名

1. 登录 Render Dashboard: https://dashboard.render.com
2. 找到您的服务（Videos-Uploading-Site）
3. 您的应用 URL 是：`https://videos-uploading-site-kfha.onrender.com`

### 步骤2：在 Render 中设置环境变量

1. 在 Render Dashboard 中，点击您的服务
2. 进入 **"Environment"** 标签
3. 找到或添加 `NEXTAUTH_URL` 环境变量
4. 设置值为您的完整应用 URL：
   ```
   NEXTAUTH_URL=https://videos-uploading-site-kfha.onrender.com
   ```
5. **重要**：确保 URL 以 `https://` 开头，且不包含 `localhost`
6. 点击 **"Save Changes"**
7. Render 会自动重新部署

### 步骤3：验证修复

1. 等待部署完成（通常1-2分钟）
2. 在教师端创建一个新的邀请
3. 检查邀请链接，应该显示您的 Render 域名而不是 localhost

## 如果还是不行

### 方法A：手动修改邀请链接

如果邀请链接是：
```
http://localhost:3000/login?email=xxx&token=xxx
```

手动替换为：
```
https://videos-uploading-site-kfha.onrender.com/login?email=xxx&token=xxx
```

### 方法B：使用测试脚本

```bash
# 在项目目录下运行
node scripts/create-test-invite.js <学生邮箱> <课程ID> https://videos-uploading-site-kfha.onrender.com
```

## 检查清单

- [ ] Render 环境变量中设置了 `NEXTAUTH_URL`
- [ ] `NEXTAUTH_URL` 的值是正确的完整 URL（包含 https://）
- [ ] `NEXTAUTH_URL` 不包含 localhost
- [ ] 部署已完成
- [ ] 创建了新邀请（旧邀请可能还是 localhost）

## 常见问题

**Q: 为什么还是 localhost？**
A: 可能是：
- 环境变量没有正确设置
- 使用了旧的邀请链接（需要创建新邀请）
- 部署还没有完成

**Q: 如何知道我的 Render 域名？**
A: 在 Render Dashboard 中，您的服务 URL 就是域名

**Q: 可以手动修改邀请链接吗？**
A: 可以！只需要将 localhost:3000 替换为您的 Render 域名即可

